{% extends 'base.html' %}

{% block title %}Dashboard | Futsal de Domingo{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mb-4">Futsal de Domingo</h1>
    <p class="mb-4">Estatísticas e rankings dos jogos de futsal aos domingos.</p>

    <!-- Top Players Cards -->
    <div class="row mb-4">
        <!-- Artilheiro Card -->
        <div class="col-12 col-md-4 mb-3">
            <div class="highlight-card card-orange">
                <div class="highlight-card-icon">
                    <i class="fas fa-futbol"></i>
                </div>
                <div class="highlight-card-title">Artilheiro</div>
                <div class="highlight-card-subtitle">Maior goleador da temporada</div>
                <div id="top-scorer">
                    <div class="spinner spinner-dark"></div>
                </div>
            </div>
        </div>

        <!-- Assistências Card -->
        <div class="col-12 col-md-4 mb-3">
            <div class="highlight-card card-blue">
                <div class="highlight-card-icon">
                    <i class="fas fa-hands-helping"></i>
                </div>
                <div class="highlight-card-title">Assistências</div>
                <div class="highlight-card-subtitle">Maior assistente da temporada</div>
                <div id="top-assistant">
                    <div class="spinner spinner-dark"></div>
                </div>
            </div>
        </div>

        <!-- Goleiro Card -->
        <div class="col-12 col-md-4 mb-3">
            <div class="highlight-card card-purple">
                <div class="highlight-card-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <div class="highlight-card-title">Melhor Goleiro</div>
                <div class="highlight-card-subtitle">Menos gols sofridos por partida</div>
                <div id="top-goalkeeper">
                    <div class="spinner spinner-dark"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- General Stats Cards -->
    <div class="row mb-4">
        <div class="col-6 col-md-3 mb-3">
            <div class="card text-center">
                <div class="card-body">
                    <h3 id="total-players">-</h3>
                    <p class="text-muted">Jogadores</p>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3 mb-3">
            <div class="card text-center">
                <div class="card-body">
                    <h3 id="total-sessions">-</h3>
                    <p class="text-muted">Domingos</p>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3 mb-3">
            <div class="card text-center">
                <div class="card-body">
                    <h3 id="total-matches">-</h3>
                    <p class="text-muted">Partidas</p>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3 mb-3">
            <div class="card text-center">
                <div class="card-body">
                    <h3 id="total-goals">-</h3>
                    <p class="text-muted">Gols</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistics Table -->
    <div class="card">
        <div class="card-header">
            <h4 class="card-title">Classificação Geral</h4>
            <div class="filter-buttons">
                <button class="btn btn-sm filter-btn active" data-filter="goals">
                    <i class="fas fa-futbol me-1"></i>
                    <span>Gols</span>
                </button>
                <button class="btn btn-sm filter-btn" data-filter="assists">
                    <i class="fas fa-hands-helping me-1"></i>
                    <span>Assistências</span>
                </button>
                <button class="btn btn-sm filter-btn" data-filter="goals_conceded">
                    <i class="fas fa-shield-alt d-none"></i>
                    <span>G.S.</span>
                </button>
                <button class="btn btn-sm filter-btn" data-filter="matches">
                    <i class="fas fa-gamepad me-1"></i>
                    <span>Partidas</span>
                </button>
            </div>
        </div>
        <div class="card-body">

            <div class="table-responsive">
                <table id="stats-table" class="table table-hover">
                    <thead>
                        <tr>
                            <th class="col-rank">#</th>
                            <th class="col-player">Jogador</th>
                            <th class="col-stats" data-sort="goals">
                                <span class="d-none d-md-inline">Gols</span>
                                <span class="d-inline d-md-none" title="Gols"><i class="fas fa-futbol"></i></span>
                            </th>
                            <th class="col-stats" data-sort="assists">
                                <span class="d-none d-md-inline">Assistências</span>
                                <span class="d-inline d-md-none" title="Assistências"><i class="fas fa-hands-helping"></i></span>
                            </th>
                            <th class="col-stats" data-sort="goals_conceded">
                                <span class="d-none d-md-inline">Gols Sofridos</span>
                                <span class="d-inline d-md-none" title="Gols Sofridos">G.S.</span>
                            </th>
                            <th class="col-stats" data-sort="matches">
                                <span class="d-none d-md-inline">Partidas</span>
                                <span class="d-inline d-md-none" title="Partidas"><i class="fas fa-gamepad"></i></span>
                            </th>
                            <th class="col-stats d-none d-lg-table-cell" data-sort="sessions">
                                <span title="Domingos"><i class="fas fa-calendar-day"></i></span>
                            </th>
                        </tr>
                    </thead>
                    <tbody id="stats-table-body">
                        <!-- Dados serão carregados via JavaScript -->
                    </tbody>
                </table>
                <div id="stats-loader" class="loader-container">
                    <div class="spinner spinner-dark"></div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}
